<%- include("./partials/header.ejs") %>

	<div class="container-fluid">
		<div class="d-sm-flex justify-content-between align-items-center mb-4">
			<h3 class="text-dark mb-0">Dashboard</h3>
			<a class="btn btn-primary btn-sm d-none d-sm-inline-block" role="button" href="#"><i
					class="fas fa-download fa-sm text-white-50"></i>&nbsp;Generate
				Report</a>
		</div>
		<div class="row justify-content-center">
			<div class="col-6 col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-6 mb-4">
				<div class="card shadow border-start-primary py-2">
					<div class="card-body">
						<div class="row align-items-center no-gutters">
							<div class="col me-2">
								<div class="text-uppercase text-primary fw-bold text-xs mb-1">
									<span>services</span>
								</div>
								<div class="text-dark fw-bold h5 mb-0">
									<span>
										<%= sentiments.length %>
									</span>
								</div>
							</div>
							<div class="col-auto">
								<i class="fab fa-first-order-alt fa-2x text-gray-300"></i>
							</div>
						</div>
					</div>
				</div>
				<div class="card shadow border-start-success py-2">
					<div class="card-body">
						<div class="row align-items-center no-gutters">
							<div class="col me-2">
								<div class="text-uppercase text-success fw-bold text-xs mb-1">
									<span>feedbacks</span>
								</div>
								<div class="text-dark fw-bold h5 mb-0">
									<span>
										<%= count %>
									</span>
								</div>
							</div>
							<div class="col-auto">
								<i class="fas fa-file-alt fa-2x text-gray-300"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-6 col-lg-5 col-xl-4">
				<div class="card shadow mb-4">
					<div class="card-header d-flex justify-content-between align-items-center">
						<h6 class="text-primary fw-bold m-0">Sentiment</h6>
						<div class="dropdown no-arrow">
							<button class="btn btn-link btn-sm dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown"
								type="button">
								<i class="fas fa-ellipsis-v text-gray-400"></i>
							</button>
							<div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
								<p class="text-center dropdown-header">dropdown header:</p>
								<a class="dropdown-item" href="#">&nbsp;Action</a><a class="dropdown-item" href="#">&nbsp;Another
									action</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="#">&nbsp;Something else here</a>
							</div>
						</div>
					</div>

					<!-- Pie Chart -->
					<div class="card-body">
						<div class="chart-area">
							<canvas
								data-bss-chart='{"type":"doughnut","data":{"labels":["Postive","Negative","Neutral"],"datasets":[{"label":"","backgroundColor":["#4e73df","#1cc88a","#36b9cc"],"borderColor":["#ffffff","#ffffff","#ffffff"],"data":[<%= `${pie_chart.positive}` %>,<%= `${pie_chart.negative}` %>, <%= `${pie_chart.neutral}` %>]}]},"options":{"maintainAspectRatio":false,"legend":{"display":true,"labels":{"fontStyle":"normal"}},"title":{"fontStyle":"normal"}}}'></canvas>
						</div>
					</div>

				</div>
			</div>
		</div>

		<!-- Stats about each service -->
		<div class="row">
			<% for(let i=0; i < sentiments.length; i++) {%>
				<div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 col-xxl-6 mb-4" style="padding: 0px 12px">
					<div class="card shadow mb-4">
						<div class="card-header py-3">
							<h6 class="text-primary fw-bold m-0">
								<%= sentiments[i].service_name %>
							</h6>
						</div>
						<div class="card-body">
							<!-- Positive -->
							<h4 class="small fw-bold">
								Positive
								<span class="float-end">
									<%= sentiments[i].positive_per %>%
								</span>
							</h4>
							<div class="progress mb-4">
								<div class="progress-bar bg-success" aria-valuenow=<%=`${sentiments[i].positive_per}` %>
									aria-valuemin="0" aria-valuemax="100" style=<%= `width:${sentiments[i].positive_per}%;` %> >
										<span class="visually-hidden">
											<%= sentiments[i].positive_per %>
										</span>
								</div>
							</div>

							<!-- Neutral -->
							<h4 class="small fw-bold">
								Neutral
								<span class="float-end">
									<%= sentiments[i].neutral_per %>%
								</span>
							</h4>
							<div class="progress mb-4">
								<div class="progress-bar bg-warning" aria-valuenow=<%=`${sentiments[i].neutral_per}` %>
									aria-valuemin="0" aria-valuemax="100" style=<%= `width:${sentiments[i].neutral_per}%;` %> >
										<span class="visually-hidden">
											<%= sentiments[i].neutral_per %>
										</span>
								</div>
							</div>

							<!-- Negative -->
							<h4 class="small fw-bold">
								Negative
								<span class="float-end">
									<%= sentiments[i].negative_per %>%
								</span>
							</h4>
							<div class="progress mb-4">
								<div class="progress-bar bg-primary" aria-valuenow=<%=`${sentiments[i].negative_per}`%>
									aria-valuemin="0" aria-valuemax="100" style=<%= `width:${sentiments[i].negative_per}%;` %> >
										<span class="visually-hidden">
											<%= sentiments[i].negative_per %>
										</span>
								</div>
							</div>
						</div>
					</div>
				</div>

				<% } %>
		</div>
	</div>

	<%- include("./partials/footer.ejs") %>